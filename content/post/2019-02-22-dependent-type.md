---
title: "依赖类型与定理证明"
date: 2019-04-14T00:56:13+08:00
draft: true
author: "Mu Xian Ming"

categories: [P]
tags: [dependent type, idris, pie]
---

# 什么是依赖类型

程序语言中的类型描述的是程序的行为，可以被用来证明程序不会在运行时出现某些错误的行为。在一般的静态类型语言里，类型和值有明确的区分，类型信息可以出现在哪也有严格的限制。而在支持依赖类型（dependent type）的语言里，类型和值之间的界限变得模糊，类型可以像值一样被计算：可以把类型作为参数传递给函数，函数也可以把类型像值一样返回。依赖类型的“依赖”两个字指的是类型可以依赖于值，这样类型和值的关系不再是单向的，两者变得可以互相描述了。这样的好处一是类型系统变得更加强大，可以阻止更多的错误类型，让程序更可靠；二是有了依赖类型之后，我们甚至可以让计算机像运行传统的计算类程序一样来运行数学证明。实际上对[四色定理](https://en.wikipedia.org/wiki/Four_color_theorem)的证明就是在 1976 年由计算机的定理证明程序来辅助推导得出的。

为了对依赖类型有一个更直观的理解，举一个具体一些的例子。假如 Java 中加入了对依赖类型的支持，那么我们就可以让数组的类型也包含数组的长度信息：

```java
String[3] threeNames = {"张三", "李四", "成吉思汗"};
```

这么做的好处是，所有围绕于数组类型的函数或类现在都可以在类型信息中包含更具体的对行为的描述。比如合并两个数组的函数`concat`的签名可以写成：

```java
String[n + m] concat(String[n] start, String[m] end) {...}
```

通过类型就可以知道`concat`返回的数组的长度是两个参数数组长度的和。这样不仅程序变得更易读，所有可以通过数组长度反映出来的程序错误都能在运行前被检测出来（后边会有实例说明）。

本文中用来说明相关概念时所用的程序语言是 [Pie](https://github.com/the-little-typer/pie)。它是为了 Friedman 和 Christiansen 的[《The Little Typer》](http://thelittletyper.com/)这本书被开发出来的支持依赖类型所有核心功能的一个小巧简洁的语言。

## 对 Pie 的简介


